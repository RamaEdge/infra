---
alwaysApply: true
---

# Infrastructure GitOps Repository Structure

This is a GitOps infrastructure repository using Flux CD for deploying Harbor, MinIO, and related services on a k3s cluster.

## Repository Overview

- **Main Documentation**: [README.md](mdc:README.md) contains the primary setup and configuration information
- **Deployment Guide**: [DEPLOYMENT.md](mdc:DEPLOYMENT.md) provides step-by-step deployment instructions
- **Setup Commands**: [SETUP_COMMANDS.md](mdc:SETUP_COMMANDS.md) contains specific commands for GitOps migration

## Directory Structure

- **`clusters/k3s-cluster/`**: Main cluster configuration directory
  - **`apps/`**: Application deployments (Harbor, MinIO, MinIO Operator)
  - **`flux-system/`**: Flux CD system configuration and Helm repositories
  - **`kustomization.yaml`**: Root Kustomization file that includes all resources

## Key Components

- **Harbor**: Container registry with external PostgreSQL and Redis
- **MinIO**: Object storage with persistent storage
- **MinIO Operator**: Manages MinIO tenant deployments
- **Flux CD**: GitOps operator for continuous deployment

## Secret Management

All sensitive data (TLS certificates, credentials) are stored as Kubernetes secrets on the cluster, not in this repository. The manifests reference these secrets by name.